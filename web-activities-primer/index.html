<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="viewport" content="width=device-width" />

  <title>Web Activities | Gordon Brander's Notebook</title>
  <meta name="description" content="Notes and scribblings from the desk of Gordon Brander" />
  <meta name="keywords" content="ux, design, leanux, prototyping, javascript, engineering, front-end development, mobile" />

  <meta http-equiv="X-Powered-By" content="DocPad"/>

  <link  rel="stylesheet" href="http://gordonbrander.github.io/notebook/vendor/normalize.css" /><link  rel="stylesheet" href="http://gordonbrander.github.io/notebook/styles/h5bp.css" /><link  rel="stylesheet" href="http://gordonbrander.github.io/notebook/styles/web-activities-primer.css" />
</head>
<body>
  

  <article class="slide-content slide-type-1 slide">
    <div class="in"><h1>What are Web Activities?</h1>
<p>Web Activities allow information to be sent between apps.</p>
<p>Practically speaking, Web Activities allow any app or webpage to have the kind of native integration that would <strong>typically require privileged API access</strong>.</p>
<p>At a high-level, there are 2 sides to Web Activities:</p>
<ul>
<li>You can call an activity from your app and be presented with apps that can handle it.</li>
<li>You may register an app to support an activity type.</li>
</ul>
</div>
  </article>

  <article class="slide-content slide-type-1 slide">
    <div class="in"><h1>What privileges do I need?</h1>
<p><strong>None!</strong> Any web app or website can use Web Activities.</p>
<p>This means you can leverage native features, not just in packaged apps, but in web apps, and even websites!</p>
<p>Having secure native feature integration for <strong>both packaged and network apps</strong> means you can choose the update and delivery model that works best for the content (versioned updates, silent updates or any combination thereof).</p>
</div>
  </article>

  <article class="slide-content slide-type-1 slide">
    <div class="in"><h1>What can I do with Web Activities?</h1>
<p>Lots of things. Here&#39;s an initial list:</p>
<ul>
<li>configure</li>
<li>costcontrol/balance</li>
<li>costcontrol/data_usage</li>
<li>costcontrol/telephony</li>
<li>dial</li>
<li>new (e.g. type: “websms/sms”, “webcontacts/contact”)</li>
<li>open</li>
<li>pick (e.g. type: “image/png”)</li>
<li>record</li>
<li>save-bookmark</li>
<li>share</li>
<li>test</li>
<li>view</li>
</ul>
</div>
  </article>

  <article class="slide-content slide-type-1 slide">
    <div class="in"><h1>How do I call Web Activities from my app?</h1>
<p>Let’s say you have an app that needs to get a picture – either from the Gallery, Camera or any other app in Firefox OS that supports that activity. To get one, you can call the pick activity, like this:</p>
<pre><code>var pick = new MozActivity({
   name: &quot;pick&quot;,
   data: {
       type: [&quot;image/png&quot;, &quot;image/jpg&quot;, &quot;image/jpeg&quot;]
   }
});</code></pre>
<p>We specify the name <code>pick</code> and the data to be PNG or JPEG images.</p>
<p>As a user, you choose the app you want to pick an image from. Once you’ve done so, the result will be posted back to the requesting app (Note: the app handling the activity chooses what will be returned).</p>
<p>Like most WebAPIs, a Web Activity has onsuccess and onerror event handlers. In the case of an image/file the <code>onsuccess</code> handler gets a blob. It can then represent the returned image visually in the app:</p>
<pre><code>pick.onsuccess = function () {    
    // Create image and set the returned blob as the src
    var img = document.createElement(&quot;img&quot;);
    img.src = window.URL.createObjectURL(this.result.blob);

    // Present that image in your app
    var imagePresenter = document.querySelector(&quot;#image-presenter&quot;);
    imagePresenter.appendChild(img);
};

pick.onerror = function () {
    // If an error occurred or the user canceled the activity
    alert(&quot;Can&#39;t view the image!&quot;);
};</code></pre>
</div>
  </article>

  <article class="slide-content slide-type-1 slide">
    <div class="in"><h1>How do I register an app to handle an activity?</h1>
<p>There are two ways.</p>
<p>Declaratively, through the manifest file:</p>
<pre><code>{
    &quot;name&quot;: &quot;My App&quot;,
    &quot;description&quot;: &quot;Doing stuff&quot;,
    &quot;activities&quot;: {
       &quot;view&quot;: {
            &quot;filters&quot;: {
                &quot;type&quot;: &quot;url&quot;,
                &quot;url&quot;: {
                    &quot;required&quot;: true, 
                    &quot;regexp&quot;:&quot;/^https?:/&quot;
                }
            }
        }
    }
}</code></pre>
<p>Or via JavaScript (this approach is still in development):</p>
<pre><code>var register = navigator.mozRegisterActivityHandler({
    name: &quot;view&quot;, 
    disposition: &quot;inline&quot;, 
    filters: {
        type: &quot;image/png&quot;
    } 
}); 

register.onerror = function () {
    console.log(&quot;Failed to register activity&quot;);
}</code></pre>
<p>...and then handle the activity:</p>
<pre><code>navigator.mozSetMessageHandler(&quot;activity&quot;, function (a) {
    /*
      Call a.postResult() or a.postError() if
      the activity should return a value    
    */
});</code></pre>
</div>
  </article>

  <article class="slide-content slide-type-1 slide">
    <div class="in"><h1>Can I create new web activity types?</h1>
<p>Absolutely! An application will be able to create new activities.</p>
<p>For example, an application can register itself as handling the activity <code>foobar</code>. Any other application is able to start the activity <code>foobar</code>.</p>
<p>To prevent naming collision problems, we recommend custom naming to be prefixed with your URL (for example: <code>example.org/foobar</code>).</p>
</div>
  </article>

  <article class="slide-content slide-type-1 slide">
    <div class="in"><h1>So, when does an app actually need to be privileged?</h1>
<p>Very rarely. For most cases you can use Web Activities and bypass the need for privileged API access.</p>
<p>For example, if your app needs camera access, all you have to do is ask for a photo via an activity. An activity sheet will pop up, and after the user takes the photo, your app will receive it. No privileged access necessary.</p>
</div>
  </article>

  <article class="slide-content slide-type-1 slide">
    <div class="in"><h1>What is the difference between Web Activities and Web Intents?</h1>
<p>Web Activities is a simplified counter-proposal to Web Intents.</p>
<p>It limits the scope of the API to the following use case: <em><strong>App A</strong> wants to delegate an activity to <strong>App B</strong></em>.</p>
<p>Web Activities isn&#39;t a discovery API or a communication API. Those things happen in the background and are completely transparent to the caller.</p>
</div>
  </article>

  <article class="slide-content slide-type-1 slide">
    <div class="in"><h1>Resources</h1>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/WebAPI/Web_Activities">https://developer.mozilla.org/en-US/docs/WebAPI/Web_Activities</a><br>the Web Activities wiki page.</li>
<li><a href="https://brendaneich.com/2013/03/mwc-2013-firefox-os-and-more-web-api-evolution/">FirefoxOS and more Web API evolution</a> on brendaneich.com</li>
<li><a href="https://hacks.mozilla.org/2013/01/introducing-web-activities/">Introducing Web Activities</a> hacks.mozilla.org</li>
<li><a href="https://hacks.mozilla.org/2013/01/introducing-the-firefox-os-boilerplate-app/">FirefoxOS Boilerplate app</a> contains lots of examples of Web Activities and APIs.<ul>
<li><a href="https://github.com/robnyman/Firefox-OS-Boilerplate-App">Github repository</a></li>
<li><a href="http://robnyman.github.io/Firefox-OS-Boilerplate-App/">Live demo</a></li>
</ul>
</li>
</ul>
</div>
  </article>

  
</body>
</html>
